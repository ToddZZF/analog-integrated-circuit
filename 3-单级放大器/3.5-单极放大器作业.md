---
title: å•ææ”¾å¤§å™¨ä½œä¸š
---

<!--more-->

$$
\begin{align*}
\newcommand{\dif}{\mathop{}\!\mathrm{d}}
\newcommand{\belowarrow}[1]{\mathop{#1}\limits_{\uparrow}}
\newcommand{\bd}{\boldsymbol}
\newcommand{\tx}{\text}
\newcommand{\L}{\mathscr{L}}
\newcommand{\p}{\partial\,}
\end{align*}
$$

å…³äºæ¨¡å‹çš„é€‰æ‹©ï¼ˆæ˜¯å¦è¦è€ƒè™‘ $r_O,g_{mb}$ï¼‰ï¼š

* åœ¨è®¡ç®—åç½®æ—¶ï¼Œä¸éœ€è¦è€ƒè™‘äºŒçº§æ•ˆåº”ï¼ˆå³  $r_O,g_{mb}$ï¼‰
* é¢˜ç›®æ²¡æœ‰è¯´ï¼Œåˆ™é»˜è®¤è¦è€ƒè™‘äºŒçº§æ•ˆåº”ï¼Œä½†å¦‚æœé¢˜ç›®å¤ªå¤æ‚ï¼Œå¯ä»¥åªè€ƒè™‘æŸäº›åœ°æ–¹çš„äºŒçº§æ•ˆåº”ï¼Œæ¯”å¦‚ï¼š
  1. å¦‚æœå™¨ä»¶çš„æ¼æè¿æ¥ä¸€ä¸ªé«˜é˜»æŠ—ï¼ˆå¦‚å¦ä¸€ä¸ªå™¨ä»¶çš„æºæï¼‰ï¼Œé‚£ä¹ˆè¦è€ƒè™‘ $r_O$

å…³äºå…¬å¼çš„è®°å¿†ï¼š

* åªéœ€è¦è®°è€ƒè™‘ $r_O,g_{mb}$ çš„å…¬å¼ï¼Œå…¶ä½™å…¬å¼å¯æ¨å‡ºæ¥
* é‚£ä¸ªï¼Œå…±æ …å’Œå…¶ä»–å‡ ä¸ªå…¬å¼ä¸å¤ªä¸€æ ·ï¼Œæœ‰äººæœ‰å¥½æ–¹æ³•è®°å—ï¼ŸğŸ˜«

> [!TIP]
> æ±‚æºæè´Ÿåé¦ˆçš„è¾“å‡ºé˜»æŠ—ï¼š
> ![Figure 3.29Equivalent circuit for cal-culating the output resistance of a degen-erated CS stage](images/Figure%203.29Equivalent%20circuit%20for%20cal-culating%20the%20output%20resistance%20of%20a%20degen-erated%20CS%20stage.jpg)
> [!NOTE]
> æ ¹æ®å°ä¿¡å·æ¨¡å‹ï¼Œæˆ‘ä»¬æœ‰ï¼š<br>
> 
> $$
V_X = (I_X-g_mV_1-g_{mb}V_{bs})r_O+I_XR_S\\
\tx{where } V_1=V_{bs}=-I_XR_S\\
\Rightarrow V_X=[I_X+(g_m+g_{mb})R_SI_X]r_O+I_XR_S
$$<br>
> 
> å¯ä»¥ç®—å‡ºï¼š<br>
> 
> $$
\begin{aligned}
  R_\tx{out} &= \frac{V_X}{I_X}\\
  &= [1+(g_m+g_{mb})R_S]r_O+R_S\\
  &= [1+(g_m+g_{mb})r_O]R_S+r_O\\
  &= R_S+r_O+(g_m+g_{mb})r_OR_S
\end{aligned}
$$

> [!TIP]
> æ±‚ä¸‹å›¾çš„è¾“å‡ºé˜»æŠ—ï¼š
> 
> ![æºæè´Ÿåé¦ˆçš„è¾“å‡ºé˜»æŠ—](images/æºæè´Ÿåé¦ˆçš„è¾“å‡ºé˜»æŠ—.jpg)
> [!NOTE]
> åªéœ€è¦å°†ä¸Šé¢æºæè´Ÿåé¦ˆçš„è¾“å‡ºé˜»æŠ—å¹¶è”ä¸Š $R_D$ å³å¯ï¼š$R_\tx{out}=\{[1+(g_m+g_{mb})R_S]r_O+R_S\} \Vert R_D$

> [!TIP]
> 3.2 In the circuit of Fig. 3.18, assume that $(W/L)_1=50/0.5$, $(W/L)_2=50/2$, and $I_{D1}=I_{D2}=0.5 \tx{mA}$ when both devices are in saturation. Recall that $Î»âˆ1/L$.<br>
> (a) Calculate the small-signal voltage gain.<br>
> (b) Calculate the maximum output voltage swing while both devices are saturated.<br>
> ![Figure 3.18 CS stage with current-source load](images/Figure%203.18%20CS%20stage%20with%20current-source%20load.jpg)
> [!NOTE]
> Solution:<br>
> 
> (a) $A_v = -g_{m1}(r_{O1}\Vert r_{O2})$ where $g_m=\sqrt{2 \mu_n C_\tx{ox} \frac{W}{L} I_D}$ and $r_{O}\approx \dfrac{1}{\lambda I_D}$, therefore<br>
> 
> $$
\begin{aligned}
    g_{m1}&=\sqrt{2\times 1.34225\times 10^{-4} \times \frac{3.9}{9\times 10^{-9}}\times 50/0.5 \times  0.5 \times10^{-3}}\\
    &=3.664\times 10^{-3}\\
    r_{O1}&=\frac{1}{0.1\times 0.5 \times 10^{-3}}=20 {\rm k\Omega}\\
    r_{O2}&=\frac{1}{0.2\times 0.5 \times 10^{-3}}=10 {\rm k\Omega}\\
    A_v &= 3.664 \times 10^{-3} \times \frac{20 \times 10^3\times 10\times 10^3}{20 \times 10^3+ 10\times 10^3}\\
    &=24.43
\end{aligned}
$$<br>
> 
> (b) $M_1,M_2$ are in saturation, therefore<br>
> 
> $$
V_\tx{in}-V_\tx{out}\leq V_\tx{TH1}\\
V_\tx{b}-V_\tx{out}\geq V_\tx{TH2}\\
\Rightarrow V_\tx{in}-V_\tx{TH1}\leq V_\tx{out}\leq V_\tx{b}-V_\tx{TH2}
$$<br>
> 
> Assuming that $M_1$ is on the edge of the triode region, we have<br>
> 
> $$
\begin{aligned}
    I_D &= \frac{1}{2} \mu_n C_\tx{ox} (\frac{W}{L})_1(V_\tx{in}-V_\tx{TH1})^2(1+\lambda_n V_\tx{out})\\
    &\leq \frac{1}{2} \mu_n C_\tx{ox} (\frac{W}{L})_1 V_\tx{out}^2(1+\lambda_n V_\tx{out})
\end{aligned}\\
$$<br>
> 
> Solve
> 
> $$
0.5\times 10^{-3}=\frac{1}{2}\times 1.34225 \times 10^{-4}\times 50/0.5\times V_\tx{out}^2(1+0.1 V_\tx{out})\\
$$
> 
> and we have<br>
> 
> $$
V_\tx{out,min}=0.2693 \tx{ V}
$$<br>
> 
> 
> Assuming that $M_2$ is on the edge of the triode region, we have<br>
> 
> $$
\begin{aligned}
    I_D &= \frac{1}{2} \mu_p C_\tx{ox} (\frac{W}{L})_1(V_{SG2}-\vert V_\tx{TH2} \vert)^2(1+\lambda_n V_{SD2})\\
    &\leq\frac{1}{2} \mu_p C_\tx{ox} (\frac{W}{L})_1 V_{SD2}^2(1+\lambda_n V_{SD2})
\end{aligned}
$$<br>
> 
> Solve
> 
> $$
0.5\times 10^{-3}=\frac{1}{2}\times 1.3835 \times 10^{-4}\times 50/2\times V_\tx{out}^2(1+0.2 V_\tx{out})\\
$$
> 
> and we have<br>
> 
> $$
V_\tx{SD,min}=0.9967 \tx{ V}\\
V_\tx{out,max}=V_{DD}-V_\tx{SD,min}=2.003 \tx{ V}
$$

> [!TIP]
> 3.17 Sketch $V_\tx{out}$ versus $V
> _\tx{in}$ for the circuits of Fig. 3.80 as $V_\tx{in}$ varies from 0 to $V_\tx{DD}$. Identify important transition points.<br>
> 
> ![Figure 3.80](images/Figure%203.80.jpg)
> [!NOTE]
> (a)<br>
> <center><img alt="IMG_1399(20210328-175413)" title="IMG_1399(20210328-175413)" src="images/IMG_1399(20210328-175413).PNG" width="500"></center><br>
> (b)<br>
> <center><img alt="IMG_1400(20210328-175429)" title="IMG_1400(20210328-175429)" src="images/IMG_1400(20210328-175429).PNG" width="500"></center><br>
> (c)<br>
> <center><img alt="IMG_1401(20210328-175448)" title="IMG_1401(20210328-175448)" src="images/IMG_1401(20210328-175448).PNG" width="500"></center><br>
> (d)ï¼ˆç¬¬äºŒæ¡å¼å­å¤šäº†ä¸ªå¹³æ–¹ï¼‰<br>
> ![IMG_1402(20210328-175508)](images/IMG_1402(20210328-175508).PNG)
> [!CAUTION]
> &emsp;&emsp;æˆ‘åˆ©ç”¨ Cadence å¯¹ (c)(d) ç”µè·¯è¿›è¡Œäº†ä»¿çœŸï¼Œä»¿çœŸç»“æœå¦‚ä¸‹ï¼ˆæ³¨æ„ç²‰è‰²çš„æ›²çº¿æ˜¯ç”µæµâš¡ï¼‰
> 
> ![IMG_1402(20210328-175508)](images/å±å¹•æˆªå›¾%202021-06-14%20222706.jpg)> 
> &emsp;&emsp;å¯¹(c)(d)ç”µè·¯çš„è¯¦ç»†åˆ†æï¼šæˆ‘ä»¬è®¾ (c) ä¸­è¾“å‡ºä¸º $V_X$ï¼Œ(d) ä¸­è¾“å‡ºä¸º $V_Y$<br>
> 
> &emsp;&emsp;ä¸å¦¨å…ˆè€ƒè™‘ä¸‰ä¸ªç®¡å­å‡é¥±å’Œçš„æƒ…å†µã€‚æ­¤æ—¶ï¼Œè‹¥å‡å° $V_\tx{in}$ï¼Œæ ¹æ® $I_{D3}=\frac{1}{2}K_p(W/L) (V_{GS3}-V_\tx{TH3})^2$ï¼Œ$I_D$ ä¼šå˜å¤§ï¼Œæ­¤æ—¶è€ƒè™‘ $M_1$ï¼Œç”±äº $V_{GS1}$ æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¦‚æœä¸è€ƒè™‘æ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”ï¼Œ$I_{D1}$ ä¸ä¼šå˜ï¼Œè¿™å°±äº§ç”Ÿäº†çŸ›ç›¾ã€‚æ•…æ ¹æ® $I_{D1}=\frac{1}{2}K_n(W/L) (V_{GS1}-V_\tx{TH1})^2(1+\lambda V_{DS1})$ï¼Œ$V_{DS1}$ åº”è¯¥å˜å¤§ï¼Œå³ $V_Y$ åº”è¯¥å˜å¤§ï¼Œå¹¶ä¸” $V_Y$ ä¸ $V_\tx{in}$ ä¹‹é—´åº”è¯¥ä¸º 2 æ¬¡å…³ç³»ï¼ˆå¼€å£å‘ä¸Šï¼‰ã€‚$M_2$ çš„æƒ…å†µä¸ $M_1$ ç±»ä¼¼ï¼Œä½†ç”±äº $V_Y$ ä¸Šå‡å¯¼è‡´ $V_{GS2}$ å˜å°ï¼Œæ‰€ä»¥è¦ä½¿ $I_{D2}$ åŒç­‰å˜å¤§ï¼Œé‚£ä¹ˆ $V_{DS2}$ å¢å¤§çš„å¹…åº¦ä¹Ÿåº”è¯¥æ›´å¤§ï¼ˆå¯¹åº”å›¾ä¸­ä¸¤çº¿åˆ†ç¦»çš„éƒ¨åˆ†ï¼‰ã€‚<br>
> 
> &emsp;&emsp;ç„¶åè€ƒè™‘å·¦è¾¹çš„æƒ…å†µï¼Œéšç€ $V_\tx{in}$ å‡å°ä¸” $V_X$ å¢å¤§ï¼Œ$M_3$ ä¼šè¿›å…¥ Triodeï¼Œè¿™ä¹ˆä¸€æ¥ï¼Œ$I_{D3}=K_p (W/L)[(V_{GS3}-V_\tx{TH})V_{DS3}-\frac{1}{2}V_{DS3}^2]$ï¼Œæ³¨æ„åˆ° $V_{GS3}$ å˜å¤§çš„åŒæ—¶ $V_X$ ä¼šå˜å¤§ï¼ˆ$V_{DS3}$ å˜å°ï¼‰ï¼Œè¿™ä¸¤è€…çš„ä½œç”¨ä¼šç›¸äº’æŠµæ¶ˆï¼Œå¯¼è‡´ $I_{D3}$ å‡ ä¹ä¸å˜ï¼Œä»è€Œ $V_{DS2},V_{DS1}$ ä¹Ÿå‡ ä¹ä¸å˜ï¼ˆå¯¹åº”å›¾ä¸­ä¸‹é¢çš„æ›²çº¿å¹³çš„é‚£ä¸€æ®µï¼‰<br>
> 
> &emsp;&emsp;ï¼ˆå…³äºä¸Šä¸€æ®µçš„è¿›ä¸€æ­¥è§£é‡Šã€‚é¦–å…ˆï¼Œæ—¢ç„¶ $I_D$ ä¸å˜ï¼Œé‚£ä¹ˆ $M_1,M_2$ ä¸‰ç«¯çš„ç”µå‹ä¹Ÿåº”è¯¥ä¸å˜ï¼Œå¦åˆ™ç”µæµå°±ä¼šå˜ï¼Œä½†æˆ‘ä»¬æ³¨æ„åˆ°å›¾åƒä¸­ $V_X$ å´ä¼šå˜å¤§ï¼Œè¿™æ˜¾ç„¶æ˜¯çŸ›ç›¾çš„ï¼Œå”¯ä¸€çš„è§£é‡Šå°±æ˜¯æ­¤æ—¶ä¸éœ€è¦ç®¡ $M_2$ çš„æ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”äº†ã€‚å¦ä¸€ä¸ªçŸ›ç›¾ç‚¹æ˜¯ï¼Œæˆ‘ä»¬æ˜“çŸ¥ï¼š$\dfrac{\p I_{D3}}{\p V_{GS3}}=V_{DS}$ï¼Œä½†å›¾åƒä¸­ $I_{D3}$ å¹¶ä¸éš $V_{GS3}$ å˜åŒ–ï¼Œæ‰€ä»¥è¿™åº”è¯¥æ˜¯ 0ï¼Œä½†æ˜¾ç„¶ $V_{DS}\neq 0$ğŸ˜±ï¼Œè¿™ç‚¹æˆ‘å®åœ¨è§£é‡Šä¸äº†â€¦â€¦ï¼‰<br>
> 
> &emsp;&emsp;

> [!CAUTION]
> å¦‚ä½•åˆ†æï¼Ÿ<br>
> <ol>
>   <li>å…ˆåˆ†æè¾“å…¥ç®¡çš„åˆå§‹çŠ¶æ€ï¼ˆè¦ä¹ˆæ˜¯ Triode è¦ä¹ˆæ˜¯ Offï¼‰ï¼Œå¹¶åˆ†ææ­¤æ—¶æœ‰æ—  $I_D$</li>
>   <li>ç„¶åæ ¹æ® $I_D$ ç›¸åŒï¼Œæ¥å¾—åˆ°å…¶ä»–ç®¡çš„çŠ¶æ€</li>
>   <li>ç„¶åæ”¹å˜è¾“å…¥</li>
>   <li>ç”±äºå„ç®¡çš„çŠ¶æ€ä¸ä¼šçªå˜ï¼ˆOffåˆ°Satåˆ°Triï¼Œæˆ–åè¿‡æ¥ï¼‰ï¼Œæ•…å¯ä»¥ç»™</li>
> </ol>


<br>


> [!TIP]
> 3.21 Assuming all MOSFETs are in saturation, calculate the small-signal voltage gain of each circuit in Fig. 3.84($Î» \neq 0,Î³=0$).<br>
> ![Figure 3.84](images/Figure%203.84.jpg)
> [!NOTE]
> å› ä¸ºé¢˜ç›®è¯´ $\lambda=0,\gamma=0$ï¼Œä¹Ÿå°±æ˜¯å¿½ç•¥æ‰€æœ‰çš„ä½“æ•ˆåº”å’Œæ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”ï¼Œæ‰€ä»¥ $g_{mb}=0,r_O=\infty$ï¼Œæ‰€ä»¥æœ‰äº›é¢˜ç›®æ˜¯æ— è§£çš„ã€‚ç­”æ¡ˆä¸Šæ²¡æœ‰å¿½ç•¥ $r_{O}$ï¼Œé‚£æˆ‘å°±å½“ $\gamma\neq 0$ æ¥åšã€‚

> [!NOTE]
> (a) <br>![Figure 3.84(a) solution](images/Figure%203.84(a)%20solution.PNG)
> [!NOTE]
> (b) <br>![Figure 3.84(b)](images/Figure%203.84(b).PNG)
> [!NOTE]
> (c) <br>![Figure 3.84(c)](images/Figure%203.84(c).PNG)
> [!NOTE]
> (d) $M_1,M_3$ å¯çœ‹ä½œ $r_{O1},r_{O3}$ï¼Œæ ¹æ®å‰é¢çš„å…¬å¼ï¼š<br>
> 
> $$
\begin{aligned}
  A_v &=-G_m(R_\tx{out}\Vert R_D)\\
  &= - \frac{g_mr_O}{R_S+r_O+g_mR_Sr_O}\cdot \frac{1}{\frac{1}{R_D}+\frac{1}{[R_S+r_O+g_mR_Sr_O]}}
\end{aligned}
$$<br>
> ä»¤ $R_S=r_{O1}$ï¼Œ$r_O=r_{O2}$ï¼Œ$R_D=r_{O3}$ å¯å¾—ï¼š<br>
> 
> $$
\begin{aligned}
  A_v&=-\frac{g_{m2}r_{O2}}{r_{O1}+r_{O2}+g_{m2}r_{O2}r_{O1}}\cdot \frac{1}{\frac{1}{r_{O3}}+\frac{1}{[r_{O1}+r_{O2}+g_{m2}r_{O2}r_{O1}]}}\\
  &=\frac{g_{m2}r_{O2}r_{O3}}{r_{O1}+r_{O2}+r_{O3}+g_{m2}r_{O2}r_{O1}}
\end{aligned}
$$

> [!NOTE]
> (e) <br>
> $$
\begin{aligned}
  R_\tx{out} &= \frac{r_{O3}+r_{O2}}{1+g_m r_{O2}}\\
    A_v &= \frac{V_\tx{out}}{V_\tx{in}}=\frac{r_{O1}}{r_{O1}+\frac{r_{O3}+r_{O2}}{1+g_{m2}r_{O2}}}
\end{aligned}
$$

> [!NOTE]
> (f) <br>
> ![Figure 3.84(f)](images/Figure%203.84(f).PNG)
<p class="infos">
(g) <br>![Figure 3.84(g)](images/Figure%203.84(g).jpeg)</p>

> [!NOTE]
> (h)<br>
> åœ¨è¾“å…¥æ”¯è·¯ä¸Šï¼Œæœ‰ï¼š<br>
> $$
-(\frac{V_X}{r_{O3}}+g_{m3}V_\tx{out})=g_{m1}V_\tx{in}+\frac{V_X}{r_{O1}}
$$<br>
> åœ¨è¾“å‡ºæ”¯è·¯ä¸Šï¼Œæœ‰ï¼š<br>
> $$
-\frac{V_\tx{out}}{r_{O2}}+g_{m2}(V_X-V_\tx{out})=0\\
\Rightarrow V_X=\frac{\frac{1}{r_{O2}}+g_{m2}}{g_{m2}}V_\tx{out}
$$<br>
> å°† $V_X$ ä»£å…¥è¾“å…¥æ”¯è·¯è¡¨è¾¾å¼ï¼Œæœ‰ï¼š<br>
> $$
-(\frac{1}{r_{O3}}\frac{\frac{1}{r_{O2}}+g_{m2}}{g_{m2}}V_\tx{out}+g_{m3}V_\tx{out})=g_{m1}V_\tx{in}+\frac{1}{r_{O1}}\frac{\frac{1}{r_{O2}}+g_{m2}}{g_{m2}}V_\tx{out}\\
$$<br>
> è§£å¾—ï¼š<br>
> $$
A_v = \frac{V_\tx{out}}{V_\tx{in}}=-\frac{g_{m1}}{g_{m3}+(\frac{1}{r_{O3}}+\frac{1}{r_{O1}})\frac{\frac{1}{r_{O2}}+g_{m2}}{g_{m2}}}
$$