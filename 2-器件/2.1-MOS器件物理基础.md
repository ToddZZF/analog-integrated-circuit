---
title: MOSå™¨ä»¶ç‰©ç†åŸºç¡€
---

<!--more-->

$$
\begin{align*}
\newcommand{\dif}{\mathop{}\!\mathrm{d}}
\newcommand{\belowarrow}[1]{\mathop{#1}\limits_{\uparrow}}
\newcommand{\bd}{\boldsymbol}
\newcommand{\tx}{\text}
\newcommand{\L}{\mathscr{L}}
\newcommand{\p}{\partial\,}
\end{align*}
$$

## æ¦‚å¿µ

PDK, Process Design Kits
EDA, Electronic Design Automatic

## å™¨ä»¶

### Diode

<!-- <center><img alt="Diode" title="Diode" src="images/Diode.jpg" width="400"></center> -->

![Types of Diode](https://i.loli.net/2021/03/03/y3EAed5gl6qNiPB.jpg)
<!-- <center><img alt="Types of Diode" title="Types of Diode" src="images/Types%20of%20Diode.jpg" width="400"></center> -->

### MOSFET

#### MOSFET Structure

![Figure 2.2 Structure of a MOS device](images/Figure%202.2%20Structure%20of%20a%20MOS%20device.jpg)
Use above n-type MOS as an example. It has:

* p-type **bulk** (**body**)
* heavily-doped n-type **source** and **drain**
* heavily-doped conductive polysilicon **gate**
* oxide

Some parameters:

* source-drain path length $L$ or $L_\tx{drawn}$
  * effective length $L_\tx{eff} - 2L_D$
* oxide thickness $t_\tx{ox}$

The comprehensive parameters of SPICE model are shown below:ï¼ˆæˆ‘ä»¬åé¢ä¼šè§£é‡Šè¿™äº›é‡æ€ä¹ˆç”¨ï¼‰

|Level 1 SPICE models for NMOS and PMOS devices|
|-----------|
|NMOS Model<br>|
|$$\begin{matrix}\rm &LEVEL=1 &VTO=0.7 &GAMMA=0.45 &PHI=0.9\\ &NSUB=9e+14 &LD=0.08eâˆ’6 &UO=350 &LAMBDA=0.1\\ &TOX=9eâˆ’9 &PB=0.9 &CJ=0.56eâˆ’3 &CJSW=0.35eâˆ’11\\ &MJ=0.45 &MJSW=0.2 &CGDO=0.4eâˆ’9 &JS=1.0eâˆ’8\end{matrix}$$|
|PMOS Model<br>|
|$$\begin{matrix}\rm &LEVEL=1 &VTO=âˆ’0.8 &GAMMA=0.4 &PHI=0.8\\ &NSUB=5e+14 &LD=0.09eâˆ’6 &UO=100 &LAMBDA=0.2\\ &TOX=9eâˆ’9 &PB=0.9 &CJ=0.94eâˆ’3 &CJSW=0.32eâˆ’11 \\&MJ=0.5 &MJSW=0.3 &CGDO=0.3eâˆ’9 &JS=0.5eâˆ’8\end{matrix}$$|

* VTO: threshold voltage with zero VSB(unit: V)
* GAMMA: body-effect coefficient (unit: V1/2)
* PHI: 2 $\Phi_F$ (unit: V)
* TOX: gate-oxide thickness (unit: m)
* NSUB: substrate doping (unit: cmâˆ’3)
* LD: source/drain side diffusion (unit: m)
* UO: channel mobility (unit: cm2/V/s)
* LAMBDA: channel-length modulation coefficient (unit: Vâˆ’1)
* CJ: source/drain bottom-plate junction capacitance per unit area (unit: F/m2)
* CJSW: source/drain sidewall junction capacitance per unit length (unit: F/m)
* PB: source/drain junction built-in potential (unit: V)
* MJ: exponent in CJ equation (unitless)
* MJSW: exponent in CJSW equation (unitless)
* CGDO: gate-drain overlap capacitance per unit width (unit: F/m)
* CGSO: gate-source overlap capacitance per unit width (unit: F/m)
* JS: source/drain leakage current per unit area (unit: A/m2)

> For more information about SPICE MOSFETS model, please visit [http://diyhpl.us/~nmz787/mems/unorganized/SPICE_MOSFET_Model_Intro.pdf](http://diyhpl.us/~nmz787/mems/unorganized/SPICE_MOSFET_Model_Intro.pdf)

The S/D junction diode must be reverse-biased, therefore p-substrate must have the most negative voltage:

![Figure 2.3 Substrate connection](images/Figure%202.3%20Substrate%20connection.jpg)
For PMOS, the n-substrate must have the most positive voltage:

![Figure 2.4 PMOS device](images/Figure%202.4%20PMOS%20device.jpg)
In CMOS technologies, NMOS and PMOS devices must be fabricated on the same wafer (usually p-type substrate), therefore PMOS device is fabricated in an n-well [Fig. 2.4(b)]. In most circuits, the n-well is tied to the most positive supply voltage.

> [!TIP]
> QUESTION: which connection is wrong?<br>
> <img src="images/mos%20buck%20connection%20quesetion.jpg" width="200">

> [!NOTE]
> Solution: The right one is wrong. We can draw the structure below:<br>
> <center><img src="images/mos%20buck%20connection%20solution.jpg" width="500"></center><br>
> The two p+ bucks being connected through p-substrate causes short circuit, which neutralizes the left NMOS, While the two n+ bucks are separated by p-substrate.<br>
> There are two way to solve the problem. Connect the middle p+ buck directly to groud, or use deep n-well.<br>
> <center><img src="images/deep%20n-well.jpg"></center>

#### MOS characteristics

![Figure 2.6 MOSFET](images/Figure%202.6%20MOSFET.jpg)
Consider an NFET shown in Fig 2.6(a), as $V_G$ becomes more positive, the holes in th p-substrate are repelled from the gate area, leaving the negative ions, creating a **depletion region**

As $V_G$ increases, When the interface potential reaches a sufficiently positive value, electrons flow from the source to the interface and eventually to the drain.

We define $V_\tx{TH}$ of an NFET as the gate voltage for which the interface is "as much n-type as the substrate is p-type". It can be proved that:


$$
V_\tx{TH}=\Phi_{MS}+2\Phi_F+\frac{Q_\tx{dep}}{C_\tx{ox}} \tag{2.1}
$$

where 

* $\Phi_{MS}$ is the difference between the work functions of the polysilicon gate and the silicon subatrate.
* $\Phi_F=(kT/q)\ln(N_\tx{sub}/n_i)$, $k$ is Boltzmann's constant, $N_\tx{sub}$ is the doping density of the substrate.
* $Q_\tx{dep}=\sqrt{4 q \epsilon_\tx{si} \vert \Phi_F \vert N_\tx{sub}} $ is the charge in the depletion region.
* $C_\tx{ox}$ is the gate-oxide capacitance per unit area.

We divided MOS by their $V_\tx{TH}$ï¼Œi.e.

* nvt $V_\tx{TH}=0$ï¼Œn stands for native
* lvt $V_\tx{TH}>0$, l stands for low
* hvt $V_\tx{TH}\gg 0$, h stands for high

We can adjust $V_\tx{TH}$ by implantation of dopants into the channel area during device fabrication.

![Figure alter the threshold](images/Figure%20alter%20the%20threshold.jpg)
PFET is similar to NFETs, but we need to apply a negative voltage to gate.

![Figure 2.8 inversion layer in a PFET](images/Figure%202.8%20inversion%20layer%20in%20a%20PFET.jpg)
---

We know that a current $I$ can be expressed as:

$$
I=Q_d \cdot v \tag{2.2}\\
Q_d:\text{charge density}
$$

Consider an NFET whose source is connected to ground and drain is connected to $V_D$ (Fig. 2,10(b))The charge density along the channel can be derived from the definition of $C_\tx{ox}$:

$$
Q_d(x) = W C_\tx{ox} [V_{GS}-V(x)-V_\tx{TH}]
$$

![Figure 2.10 NFET channel charge density](images/Figure%202.10%20NFET%20channel%20charge%20density.jpg)
From ${\rm (2.2)}$ the current is given by

$$
I_D = -W C_\tx{ox} [V_{GS}-V(x)-V_\tx{TH}] v
$$

Noting that $v=\mu E$ and $E(x)=-\dif V/\dif x$, we have

$$
I_D = W C_\tx{ox} [V_{GS}-V(x)-V_\tx{TH}] \mu_n \frac{\dif V(x)}{\dif x}
$$

subject to boundary conditions $V(0)=0$ and $V(L)=V_{DS}$ã€‚ Multiplying both sides by $\dif x$ and performing integration, we obtain

$$
\int_{x=0}^L I_D \dif x = \int_{V=0}^{V_{DS}} W C_\tx{ox} \mu_n [V_{GS}-V(x)-V_{TH}] \dif V \tag{2.7}
$$

Since $I_D$ is constant along the channel,

$$
I_D = \mu_n C_\tx{ox} \frac{W}{L}\left[(V_{GS}-V_\tx{TH})V_{DS}-\frac{1}{2} V_{DS}^2\right]
$$

Note that $L$ is the effective channel length.

This is a quadratic function, at $V_{DS}=(V_{GS}-V_\tx{TH})$, it reaches its maximum value:

$$
I_{D,\tx{max}} = \frac{1}{2}\mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})^2
$$

![Figure 2.11 Drain current versus drain-source voltage in the triode region](images/Figure%202.11%20Drain%20current%20versus%20drain-source%20voltage%20in%20the%20triode%20region.jpg)


if $V_{DS}\ll 2(V_{GS}-V_\tx{TH})$, we have

$$
I_D \approx \mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})V_{DS}
$$

that is, the drain current is a linear function of $V_{DS}$, we call it çº¿æ€§åŒº

![Figure 2.12 Linear operation in deep triode region](images/Figure%202.12%20Linear%20operation%20in%20deep%20triode%20region.jpg)
The linear realtionship implies that the path from the source to the drain can be represented by a linear resistor equal to

$$
R_\tx{on} = \frac{1}{\mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})} \tag{2.11}
$$

A MOSFET can therefore operate as a resistor whose value is controlled by the overdrive voltage (so long as $V_{DS}\ll 2(V_{GS}-V_\tx{TH})$ )

![Figure 2.13 MOSFET as a controlled linear resistor](images/Figure%202.13%20MOSFET%20as%20a%20controlled%20linear%20resistor.jpg)
---

if $V_{DS}>V_{GS}-V_\tx{TH}$, $[V_{GS}-V(x)-V_\tx{TH}]$ drops to zero before $x=L$, i.e. the inversion layer stops at $x\leq L$. We say the he channel is "pinch off"(å¤¹æ–­)

![Figure 2.16 Pinch-off behavior](images/Figure%202.16%20Pinch-off%20behavior.jpg)

The integral  must be taken from $x=0$ to $x=L'$, and $V(x)=0$ to $V(x)=V_{GS}-V_\tx{TH}$ as a result,

$$
I_D = \frac{1}{2} \mu_n C_\tx{ox} \frac{W}{L'}(V_{GS}-V_\tx{TH})^2 \tag{2.13}
$$

> æ³¨ï¼šæ­¤å¤„å¯æš‚æ—¶è®¤ä¸º $L'\approx L$ï¼Œåé¢æˆ‘ä»¬ä¼šåœ¨ Channal Length Modulation ä¸­è®¨è®º $L'$

indicating that $I_D$ is relatively independent of $V_{DS}$ and becomes constant, and we cay the device operates in the "saturation" region.

![Figure 2.15 Saturation of drain current](images/Figure%202.15%20Saturation%20of%20drain%20current.jpg)
We call the minimum $V_{DS}$ necessary for operation in sturation **overdrive voltage**, for this reason, some books write $V_{D,\tx{sat}}=V_{GS}-V_\tx{TH}$

How does the device conduct current in the presence of pinch-off? As the electrons approach thepinch-off point (whereQdâ†’0), their velocity rises tremendously (v=I/Qd). Upon passing the pinch-off point, the electrons simply shoot through the depletion region near the drain junction and arrive at thedrain terminal.

![Figure 2.18 VDS-VGS plane showing regions of operation](images/Figure%202.18%20VDS-VGS%20plane%20showing%20regions%20of%20operation.jpg)

#### MOS Transconductance

Since a MOSFET operating in saturation produces a current in response to its gate-source overdrive voltage, we define the figure of merit as the change in the drain current divided by the change in the gate-sourcevoltage. Called the **transconductance** (and usually defined in the saturation region) and denoted by $g_m$

$$
g_m = \left.\frac{\p I_D}{\p V_{GS}}\right|_{V_{DS} \text{ const.}}\\
=\mu_n C_\tx{ox}\frac{W}{L}(V_{GS}-V_\tx{TH})
$$

$g_m$ represents the sensitivity of the device: for a high $g_m$, a small change in $V_G$ Sresults in a large change in $I_D$

if we apply $\text{2.13}$, $g_m$ can also be expressed as 

$$
\begin{cases}
  (V_{GS}-V_\tx{TH}) = \sqrt{\dfrac{2 I_D}{\mu_n C_\tx{ox} \frac{W}{L}}}\\
  \mu_n C_\tx{ox} \dfrac{W}{L'} = \dfrac{2I_D}{(V_{GS}-V_\tx{TH})^2} 
\end{cases}\\
\Rightarrow g_m = \begin{cases}
   \mu_n C_\tx{ox}\dfrac{W}{L}(V_{GS}-V_\tx{TH})\\
    \sqrt{2 \mu_n C_\tx{ox} \frac{W}{L} I_D}\\
  \dfrac{2I_D}{V_{GS}-V_\tx{TH}}
\end{cases}
$$

![Figure 2.20 MOS transconductance](images/Figure%202.20%20MOS%20transconductance.jpg)
è¿™ä¸‰ç§å…¬å¼æˆ‘ä»¬è¦ç”¨å“ªä¸€ç§å‘¢ï¼Ÿå¦‚æœæ˜¯åœ¨é¢˜ç›®ä¸­ï¼Œé‚£ä¹ˆå°±æ ¹æ®é¢˜ç›®ç»™å‡ºçš„æ¡ä»¶æ¥æ±‚ã€‚å¦‚æœæ˜¯åœ¨åé¢æ¨å¯¼å…¶ä»–å…¬å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€‰æ‹©çš„å…¬å¼ä¸­ä¸€è¦åŒ…å«æˆ‘ä»¬å…³å¿ƒçš„é‡ï¼ŒäºŒè¦åŒ…å«æˆ‘ä»¬è¦æ±‚ä¸å˜çš„é‡ã€‚

#### Second-Order Effects

**Body Effect** ä½“æ•ˆåº” In the analysis above, we tacitly assumed that the bulk and the source were tied to ground. However the buck might drop below the source voltage, making more holes are attracted to the substrate connection, i.e. the depletion region becomes wider.

Recall from Eq. $(2.1)$, the threshold voltage is a function of the total charge in the total charge in the depletionregion because the gate charge must mirror $Q_d$ before an inversion layer is formed. Thus, **as $V_B$ drops and $Q_d$ increases, $V_\tx{TH}$ also increases**. With body effect,

$$
V_\tx{TH}=V_\tx{TH0}+\gamma(\sqrt{2\Phi_F+V_{SB}}-\sqrt{\vert 2 \Phi_F\vert})
$$



**Channel-Length Modulation** æ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº” The actual length of the channel $L'$ is a function of $V_{DS}$.

if we define $L'=L-\Delta L$, i.e., $1/L' \approx (1+\Delta L/L)L$, and assuming a first-order relationship $\Delta L/L=\lambda V_{DS}$, we have, in saturation,

$$
I_D \approx \frac{1}{2}\mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})^2(1+\lambda V_{DS})
$$

ä¸€èˆ¬æ¥è¯´ï¼Œæ²Ÿé“é•¿åº¦è¶Šé•¿ï¼Œæ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”å°±è¶Šä¸æ˜æ˜¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•çš„è®¤ä¸ºï¼š$\lambda \propto \dfrac{1}{L}$

**Subthreshold Conduction** äºšé˜ˆå€¼å¯¼ç”µ For $V_{GS} < V_\tx{TH}$, a "weak" inversion layer still exists, and $I_D$ exhibits an *exponential* dependence on $V_{GS}$

$$
I_D = I_0 \exp \frac{V_{GS}}{\xi V_T}
$$

å®šä¹‰èƒ½æ•ˆæ¯” $g_m/I_D$ï¼Œå•ä½ $I_D$ æä¾›çš„ $g_m$ï¼Œæˆ‘ä»¬æœ‰ï¼š



#### MOS Capacitances

![Figure 2.32 MOS capacitances](images/Figure%202.32%20MOS%20capacitances.jpg)
1. the oxide capacitance $C_1 = WLC_\tx{ox}$
2. the depletion capacitance $C_2=WL\sqrt{q \epsilon_\tx{si}N_\tx{sub}/(4\Phi_F)}$
3. the overlap capacitance $C_3,C_4$
4. the junction capacitance

![Figure 2.34 MOS capacitances versus Vgs](images/Figure%202.34%20MOS%20capacitances%20versus%20Vgs.png)

#### MOS Small-Signal Model

In many analog circuits, MOSFETs are biased in the saturation. If we appy a change to the gate-source voltage, $\Delta V=V_{GS}$ï¼Œthe drain current therefore changes by $g_m V_{GS}$. The model is in Fig. 2.37(a)

If we consider the channel-length modulation, the drain current also varies with the drain-source voltage, this is modelled by a voltage-dependent current (Fig. 2.37(a))

the voltage-dependent current whose value linearly depends on the voltage across it is equivalent to a linear resistor [Fig. 2.37(b)], the resistor is given by

$$
\begin{aligned}
  r_O &= \frac{\p V_{DS}}{\p I_D}\\
  &= \frac{1}{\p I_D/\p V_{DS}}\\
  &=\frac{1}{\frac{1}{2}\mu_n C_{ox}\frac{W}{L} (V_{GS}-V_\tx{TH})^2 \cdot \lambda}\\
  &\approx \frac{1+\lambda V_{DS}}{\lambda I_D}\\
  &\approx \frac{1}{\lambda I_D} \; \tx{assume }\lambda V_{DS}\ll 1
\end{aligned}
$$

The bulk potential influences the threshold voltage. Therefore the drain current is a function of the bulk volage. That is, the bulk behaves as a second gate. We can modeling this by a current source $g_mb V_{BS}$ between D and S [Fig. 2.37(d)]

$$
\begin{aligned}
  g_{mb} &= \frac{\p I_D}{\p V_{BS}}\\
  &= \mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})\left(-\frac{\p V_\tx{TH}}{\p V_{BS}}\right)\\
  &=g_m \frac{\gamma}{2\sqrt{2\Phi_F+V_{SB}}}\\
  &= \eta g_m
\end{aligned}
$$

![Figure 2.37 MOS small-signal model](images/Figure%202.37%20MOS%20small-signal%20model.jpg)

> è¿™é‡Œå®Œå…¨æ²¡æœ‰åŒºåˆ†ç›´æµå¤§ä¿¡å·ä¸äº¤æµå°ä¿¡å·ï¼Œæ¯”å¦‚å›¾(d)ä¸­çš„ $V_{BS}$ æŒ‡äº¤æµå°ä¿¡å·ï¼Œä½† $g_{mb}$ å…¬å¼ä¸­çš„ $V_{SB}$ åˆæ˜¯æŒ‡ç›´æµå¤§ä¿¡å·ï¼Œè¿™ä¸¤è€…å¹¶éäº’ä¸ºç›¸åæ•°ï¼ä¸å¾—ä¸è¯´è¿™å¾ˆå®¹æ˜“æ··æ·†ğŸ˜“ã€‚å»ºè®®é€šè¿‡ä¸Šä¸‹æ–‡æ¥åŒºåˆ†ã€‚
> 
> å¦å¤–ï¼Œæ³¨æ„åˆ°å›¾ (d) ä¸­ä½¿ç”¨äº† $V_{gs}$ è€Œä¸æ˜¯ $V_{GS}$ï¼Œæˆ–è®¸å°†æ¥å¯ä»¥ç”¨ $V_{gs}$ æ¥æŒ‡ä»£äº¤æµå°ä¿¡å·ï¼Ÿè¿™å°±äº¤ç»™ä¸‹å‡ å±Šçš„åŒå­¦æ¥è®¨è®ºå§ã€‚


![Figure 2.39 Complete MOS small-signal model](images/Figure%202.39%20Complete%20MOS%20small-signal%20model.jpg)

> [!TIP]
> å¦‚ä½•åˆ©ç”¨ SPICE æ¨¡å‹å‚æ•°æ±‚å‡ºå°ä¿¡å·æ¨¡å‹ï¼Ÿ

|Level 1 SPICE models for NMOS and PMOS devices|
|-----------|
|NMOS Model<br>|
|$$\begin{matrix}\rm &LEVEL=1 &VTO=0.7 &GAMMA=0.45 &PHI=0.9\\ &NSUB=9e+14 &LD=0.08eâˆ’6 &UO=350 &LAMBDA=0.1\\ &TOX=9eâˆ’9 &PB=0.9 &CJ=0.56eâˆ’3 &CJSW=0.35eâˆ’11\\ &MJ=0.45 &MJSW=0.2 &CGDO=0.4eâˆ’9 &JS=1.0eâˆ’8\end{matrix}$$|
|PMOS Model<br>|
|$$\begin{matrix}\rm &LEVEL=1 &VTO=âˆ’0.8 &GAMMA=0.4 &PHI=0.8\\ &NSUB=5e+14 &LD=0.09eâˆ’6 &UO=100 &LAMBDA=0.2\\ &TOX=9eâˆ’9 &PB=0.9 &CJ=0.94eâˆ’3 &CJSW=0.32eâˆ’11 \\&MJ=0.5 &MJSW=0.3 &CGDO=0.3eâˆ’9 &JS=0.5eâˆ’8\end{matrix}$$|

> [!NOTE]
> <ol>
>     <li>
>       é¦–å…ˆæ±‚ $\mu_n C_\tx{ox}$
>       <ul>
>         <li>
>           $\mu_n$ å¯¹åº” SPICE ä¸­çš„ <strong>UO</strong>ï¼ˆæ³¨æ„å•ä½ï¼ï¼‰
>         </li>
>         <li>
>           $C_\tx{ox} = \dfrac{\varepsilon_0 \varepsilon_{r,\tx{ox}}}{t_\tx{ox}}$ï¼Œåˆ†å­éƒ¨åˆ†æ˜¯å¸¸é‡ï¼Œä¸º $8.8\times 10^{-14} \times 3.9 \tx{F/cm}$ï¼Œåˆ†æ¯å¯¹åº” SPICE ä¸­çš„ <strong>TOX</strong>
>         </li>
>       </ul>
>     </li>
>     <li>
>       ç„¶åæ±‚ $g_m$ï¼Œæˆ‘ä»¬å¯ä»¥ä» SPICE ä¸­çŸ¥é“ $V_\tx{TH}$ï¼ˆå³ VTOï¼‰ï¼Œé¢˜ç›®ä¸€èˆ¬ä¼šç»™$W/L$ï¼Œä»¥åŠ $V_{GS}$ æˆ– $I_D$ï¼Œè¿™æ ·å°±èƒ½ç”¨å‰é¢çš„ç¬¬ä¸€æ¡æˆ–ç¬¬äºŒæ¡å…¬å¼æ±‚ã€‚
>     </li>
>     <li>
>       $r_O=\dfrac{1}{\lambda I_D}$ï¼Œ$\lambda$ å¯¹åº” SPICE ä¸­çš„ <strong>LAMBDA</strong>ï¼Œ$I_D$ ç”±é¢˜ç›®ç»™å‡ºæˆ–é€šè¿‡é¥±å’ŒåŒº $I_D$ å…¬å¼æ±‚ï¼ˆè¦è€ƒè™‘æ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”ï¼‰
>     </li>
>     <li>
>       $g_{mb}=g_m \dfrac{\gamma}{2\sqrt{2\Phi_F+V_{SB}}}$ï¼Œ$\gamma$ å¯¹åº” SPICE ä¸­çš„ <strong>GAMMA</strong>ï¼Œ$2\Phi_F$ å¯¹åº” SPICE ä¸­çš„ <strong>PHI</strong>ï¼Œ$V_{SB}$ ç”±é¢˜ç›®ç»™å‡º
>     </li>
>     <li>
>       $C_{GD}=WC_\tx{ov}$ï¼Œ$C_\tx{ov}$ å³ SPICE ä¸­çš„ <strong>CGDO</strong>
>     </li>
>     <li>
>       $C_{GS}=\dfrac{2}{3}WLC_\tx{ox}+WC_\tx{ov}$ï¼Œ$C_\tx{ox}$ ä¹‹å‰æ±‚è¿‡ï¼Œ$C_\tx{ov}$ å³ SPICE ä¸­çš„ <strong>CGSO</strong>ï¼ˆä½†è¯¾æœ¬ä¸­çš„è¡¨æ ¼å¹¶æ²¡æœ‰ç»™å‡ºè¿™ä¸ªå‚æ•°ï¼Œæ‰€ä»¥åªèƒ½ç”¨ CGDO ä»£æ›¿ï¼‰
>     </li>
>     <li>$C_{GB}$ ä¸€èˆ¬å¿½ç•¥</li>
>     <li>$C_{DB},C_{SB}=WEC_j+2(W+E)C_{jsw}$</li>ï¼Œ$C_j$ å³ <strong>CJ</strong>ï¼Œ$C_{jsw}$ å³ <strong>CJSW</strong>ï¼Œ$E$ æ˜¯ Dã€S çš„é•¿åº¦ï¼ˆä½†æˆ‘ä»æ¥æ²¡è§é¢˜ç›®ç»™è¿‡ï¼‰
>   </ol>

> [!CAUTION]
> è¡¥å……ï¼šå¦‚æœæ¶‰åŠç”µå®¹çš„è®¡ç®—ï¼Œé‚£ä¹ˆ $L$ åº”è¯¥å‡å» $LD$ ï¼ˆsource/drain side diffusionï¼‰<br>
> æ ¹æ®ä¸Šé¢è¿‡ç¨‹è®¡ç®—å‡ºçš„å€¼å¦‚ä¸‹ï¼š
> <ul>
>   <li>
>   NMOSï¼š$\mu_n C_\tx{ox} = 1.335\times 10^{-4} {\rm A/V^2}$
>   </li>
>   <li>
>   PMOSï¼š$\mu_p C_\tx{ox} = 3.813\times 10^{-5} {\rm A/V^2}$
>   </li>
> </ul>

### ç”µé˜»

CMOS å·¥è‰ºä¸­çš„ç”µé˜»ç§ç±»ï¼š

* ç¡…ç”µé˜»(poly resistor)
* æ‰©æ•£ç”µé˜»(diffusion resistor)
* é‡‘å±ç”µé˜»(é€ æˆ IR drop)
* MOS å¯¼é€šç”µé˜»ï¼ˆ$R_\tx{on}$ï¼‰

ç”µé˜»å‚æ•°ï¼š

* æ–¹å—ç”µé˜»(sheet resistance å•ä½ $\Omega$/$\square$)
* é€šå­”ç”µé˜»(contact resistance å•ä½)
* æ¸©åº¦ç³»æ•°

### ç”µå®¹

* MOS ç”µå®¹ï¼š4-20 ${\rm nF/mm^2}$ï¼ˆç»ç¼˜æ …å¾ˆè–„ï¼Œå•ä½å¯†åº¦é«˜ï¼‰
* MIM ç”µå®¹ï¼ˆMetal-Insulator-Metalï¼‰ï¼š1-5 ${\rm nF/mm^2}$ï¼ˆç²¾åº¦é«˜ï¼‰
* MOM ç”µå®¹ï¼ˆMetal-Oxide-Metalï¼‰ï¼š1-5 ${\rm nF/mm^2}$ï¼ˆå……åˆ†åˆ©ç”¨é¢ç§¯ï¼‰
* é«˜å¯†åº¦ MIM ç”µå®¹ï¼š20-50 ${\rm nF/mm^2}$
* æ·±æ§½ç”µç­’ï¼ˆdeep trenchï¼‰ï¼š50-400 ${\rm nF/mm^2}$

è¯¥é€‰ç”¨å“ªç§ç”µå®¹ï¼Ÿ

1. æŒ‡å®šè½¬è§’é¢‘ç‡ï¼ˆcut-offfrequencyï¼‰çš„RCæ»¤æ³¢å™¨MIMâ€”é«˜ç²¾åº¦
2. ç‰¹å®šå·¥ä½œé¢‘ç‡çš„æŒ¯è¡å™¨
   * é«˜é¢‘â€”â€”MIMï¼ˆé«˜ç²¾åº¦ï¼ŒQå€¼é«˜ï¼‰
   * ä½é¢‘â€”â€”MOMï¼ˆé¢ç§¯å°ï¼‰
3. ç”µæºä¸Šçš„å»è€¦ç”µå®¹MOSâ€”â€”ä½é¢‘ã€èŠ‚çœé¢ç§¯

## ä¹ é¢˜

* MOSç®¡çš„layoutæ˜¯æ€æ ·çš„ï¼Ÿå°è¯•ç”»å‡ºæ¥
* MOSç®¡æœ‰å“ªå‡ ä¸ªå·¥ä½œåŒºï¼Ÿæ¯ä¸ªå·¥ä½œåŒºçš„ç‰¹æ€§å’Œè¡¨è¾¾å¼ï¼Ÿ
  > ä¸‰ä¸ªåŒºï¼Œåˆ†åˆ«æ˜¯ï¼š
  >
  > 1. å¯å˜ç”µé˜»åŒº triode region
  >    * $V_{GS}>V_\tx{TH}$ ä¸” $V_{GS}-V_{DS}>V_\tx{TH}$
  >    * NMOSï¼š$I_D = \mu_n C_\tx{ox} \frac{W}{L}\left[(V_{GS}-V_\tx{TH})V_{DS}-\frac{1}{2} V_{DS}^2\right]$
  >    * PMOSï¼šä¸Šé¢åŠ è´Ÿå·
  > 2. æ’æµåŒºï¼ˆé¥±å’ŒåŒºï¼‰saturation region
  >    * $V_{GS}>V_\tx{TH}$ ä¸” $V_{GS}-V_{DS}< V_\tx{TH}$
  >    * NMOSï¼š$I_D = \frac{1}{2} \mu_n C_\tx{ox} \frac{W}{L'}(V_{GS}-V_\tx{TH})^2$
  >    * PMOSï¼šä¸Šé¢åŠ è´Ÿå·
  > 3. æˆªæ­¢åŒºï¼ˆå¤¹æ–­åŒºï¼‰cut-off region
  >    * $V_{GS}< V_\tx{TH}$
  >    * $I_D=0$
* MOSç®¡çš„äºŒçº§æ•ˆåº”æœ‰å“ªäº›ï¼Ÿå„æœ‰ä»€ä¹ˆå½±å“ï¼Ÿè¡¨è¾¾å¼æ˜¯ï¼Ÿ
  > 1. ä½“æ•ˆåº”ï¼ˆBody Effectï¼‰
  >    * $V_B \downarrow$ å¯¼è‡´æ›´å¤šç©ºç©´è¢«å¸å¼•åˆ° Buckï¼Œè€—å°½å±‚å®½åº¦ $\uparrow$ï¼Œ$V_\tx{TH}\uparrow$
  >    * $V_\tx{TH}=V_\tx{TH0}+\gamma(\sqrt{2\Phi_F+V_{SB}}-\sqrt{\vert 2 \Phi_F\vert})$
  > 2. æ²Ÿé“é•¿åº¦è°ƒåˆ¶æ•ˆåº”ï¼ˆChannel Length Modulation Effectï¼‰
  >    * æœ‰æ•ˆæ²Ÿé“é•¿åº¦ä¸ $V_{DS}$ æœ‰å…³
  >    * $I_D \approx \frac{1}{2}\mu_n C_\tx{ox} \frac{W}{L}(V_{GS}-V_\tx{TH})^2(1+\lambda V_{DS})$
  > 3. äºšé˜ˆå€¼å¯¼ç”µï¼ˆSubthreshold Conductionï¼‰
  >    * $V_G< V_\tx{TH}$ æ—¶ï¼Œä»æœ‰å¼±åå‹å±‚å­˜åœ¨
  >    * $I_D = I_0 \exp \dfrac{V_{GS}}{\xi V_T}$
* MOSç®¡å°ä¿¡å·æ¨¡å‹æ˜¯ä»€ä¹ˆï¼Ÿ
  > 1. å®šä¹‰ï¼šå°ä¿¡å·æ¨¡å‹æ˜¯å¤§ä¿¡å·æ¨¡å‹åœ¨é™æ€å·¥ä½œç‚¹é™„è¿‘çš„è¿‘ä¼¼
  > 2. å…¬å¼ï¼š
  >    * $I_D=g_m V_{GS}$ï¼Œå…¶ä¸­ $g_m=\mu_n C_\tx{ox}\frac{W}{L}(V_{GS}-V_\tx{TH})$
  >    * è‹¥è€ƒè™‘æ²Ÿé“è°ƒåˆ¶æ•ˆåº”ï¼Œåˆ™ DS ä¸¤ç«¯ç­‰æ•ˆä¸ºç”µæµæº $I_D$ ä¸ $r_O$ çš„å¹¶è”ï¼Œå…¶ä¸­ $r_O=\dfrac{1}{\lambda I_D}$
  >    * è‹¥è€ƒè™‘ä½“æ•ˆåº”ï¼Œåˆ™åœ¨ä¸Šä¸€æ¡çš„åŸºç¡€ä¸Šå¹¶è”ä¸Š $g_{mb}V_{BS}$ï¼Œå…¶ä¸­ $g_{mb}=\eta g_m$ï¼Œ$\eta=\dfrac{\gamma}{2\sqrt{2\Phi_F+V_{SB}}}$
  ![Figure 2.37 MOS small-signal model](images/Figure%202.37%20MOS%20small-signal%20model.jpg)
* è¯·æ¨å¯¼ $g_m$çš„ä¸‰ç§è¡¨è¾¾å¼
  > $$
  > \because I_D = \frac{1}{2} \mu_n C_\tx{ox} \frac{W}{L'}(V_{GS}-V_\tx{TH})^2\\
  > \begin{aligned}
  > \therefore g_m &= \left.\frac{\p I_D}{\p V_{GS}}\right|_{V_{DS} \text{ const.}}\\
  > &=\mu_n C_\tx{ox}\frac{W}{L}(V_{GS}-V_\tx{TH})
  > \end{aligned}
  > $$
  >
  > $$
  > \because\begin{cases}
  > (V_{GS}-V_\tx{TH}) = \sqrt{\dfrac{2 I_D}{\mu_n C_\tx{ox} \frac{W}{L}}}\\
  > \mu_n C_\tx{ox} \dfrac{W}{L} = \dfrac{2I_D}{(V_{GS}-V_\tx{TH})^2} 
  > \end{cases}\\
  > \therefore g_m = \begin{cases}
  >  \sqrt{2 \mu_n C_\tx{ox} \frac{W}{L} I_D}\\
  > \dfrac{2I_D}{V_{GS}-V_\tx{TH}}
  > \end{cases}
  > $$

